ВЫБРАТЬ
спр.Ссылка КАК Ссылка,
ВложенныйЗапрос.КоличествоНачальныйОстаток,
ВложенныйЗапрос.КоличествоКонечныйОстаток,
ВложенныйЗапрос.КоличествоПриход,
ВложенныйЗапрос.КоличествоРасход,
ВложенныйЗапрос.Штрихкод,
ВложенныйЗапрос.Цена,
ВложенныйЗапрос.Склад
ИЗ
Справочник.Номенклатура КАК спр
ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.ВНаличииНачальныйОстаток, 0) КАК КоличествоНачальныйОстаток,
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.ВНаличииКонечныйОстаток, 0) КАК КоличествоКонечныйОстаток,
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.ВНаличииПриход, 0) КАК КоличествоПриход,
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.ВНаличииРасход, 0) КАК КоличествоРасход,
МИНИМУМ(ЕСТЬNULL(Штрихкоды.Штрихкод, "")) КАК Штрихкод,
ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Цена, 0) КАК Цена,
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.Склад, "") КАК Склад,
ТоварыНаСкладахОстаткиИОбороты.Номенклатура КАК Номенклатура
ИЗ
РегистрНакопления.ТоварыНаСкладах.ОстаткиИОбороты(&Дата1, &Дата2, , , ) КАК ТоварыНаСкладахОстаткиИОбороты
ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Штрихкодыноменклатуры КАК Штрихкоды
ПО ТоварыНаСкладахОстаткиИОбороты.Номенклатура = Штрихкоды.Номенклатура
ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ЦеныНоменклатуры.СрезПоследних(&Дата, ВидЦены = &ВидЦены) КАК ЦеныНоменклатурыСрезПоследних
ПО ТоварыНаСкладахОстаткиИОбороты.Номенклатура = ЦеныНоменклатурыСрезПоследних.Номенклатура
ГДЕ
ТоварыНаСкладахОстаткиИОбороты.Склад = &Склад

СГРУППИРОВАТЬ ПО
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.ВНаличииНачальныйОстаток, 0),
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.ВНаличииКонечныйОстаток, 0),
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.ВНаличииПриход, 0),
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.ВНаличииРасход, 0),
ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Цена, 0),
ЕСТЬNULL(ТоварыНаСкладахОстаткиИОбороты.Склад, ""),
ТоварыНаСкладахОстаткиИОбороты.Номенклатура) КАК ВложенныйЗапрос
ПО спр.Ссылка = ВложенныйЗапрос.Номенклатура
ГДЕ
НЕ спр.ЭтоГруппа

УПОРЯДОЧИТЬ ПО
Ссылка
АВТОУПОРЯДОЧИВАНИЕ